const SwapRouter = artifacts.require("SwapRouter");
const tokenOwner = '0xdF0b2157199eeE76489D990160d38d16d71F1A04';
const daiABI = require('./abi/dai');
const daiAddress = "0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3";
const daiContract = new web3.eth.Contract(daiABI, daiAddress);

const ethABI = require('./abi/eth');
const ethAddress = "0x2170Ed0880ac9A755fd29B2688956BD959F933F8";
const ethContract = new web3.eth.Contract(ethABI, ethAddress);

contract('pmm Test', async([alice, bob, admin, dev, minter]) => {
    before(async () => {
        this.SwapRouter = await SwapRouter.new({from: alice});
        await daiContract.methods.transfer(admin, '369386228078917274203').send({from: tokenOwner});
    });

    it('test', async() => {
        await daiContract.methods.approve(this.SwapRouter.address, '369386228078917274203').send({from: admin});
        let result = await this.SwapRouter.swap("pmmFeeDynamic", "0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3", "369386228078917274203", "0x0000000000000000000000001af3f329e8be154074d8769d1ffa4ee058b1dbc30000000000000000000000002170ed0880ac9a755fd29b2688956bd959f933f8000000000000000000000000000000000000000000000014064381587d494a5b000000000000000000000000000000000000000000000000026a3b2ff5eaefff0000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071c292269718bc1e38edf6023fb427d35924389e000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000014064381587d494a5b00000000000000000000000000000000000000000000000000000000000002a000000000000000000000000006dbc4fe79e2541b03fe4731b2579c0b7f46f099000000000000000000000000c590175e458b83680867afd273527ff58f74c02b000000000000000000000000f9994570c235215633f8a1201233426e7489c5c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027d5b5978b48000000000000000000000000000000000000000000000000014064df77e9c020b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060ded62a01ffffffffffffffffffffffffffffffffffffff21fac3c860ded5b20000001c000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000002170ed0880ac9a755fd29b2688956bd959f933f8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000001af3f329e8be154074d8769d1ffa4ee058b1dbc30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421cae45e123b91dc19a24139502d104e4e185642f2975bbbc4b624d94fe8f1f3dcf1f8e5e311ef14799c0c18071b549fd707609b8616180516a1fcb32ebd15d23e603000000000000000000000000000000000000000000000000000000000000",
        {from: admin});
        console.log(await ethContract.methods.balanceOf(this.SwapRouter.address).call());
    })
})
const SwapRouter = artifacts.require("SwapRouter");
const tokenOwner = '0xE1530F9b20C6E20cE56aDd3164097584Ef90Ea30';
const usdcABI = require('./abi/usdc');
const usdcAddress = "0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d";
const usdcContract = new web3.eth.Contract(usdcABI, usdcAddress);

const busdABI = require('./abi/busd');
const busdAddress = "0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56";
const busdContract = new web3.eth.Contract(busdABI, busdAddress);

contract('zeroEx Test', async([alice, bob, admin, dev, minter]) => {
    before(async () => {
        this.SwapRouter = await SwapRouter.new({from: alice});
        // await usdcContract.methods.transfer(admin, '109484817855095221280').send({from: tokenOwner});
    });

    it('test', async() => {
        // await usdcContract.methods.approve(this.SwapRouter.address, '109484817855095221280').send({from: "0x0b25a50f0081c177554e919eeff192cfe9efde15"});
        console.log(await busdContract.methods.balanceOf("0x0b25a50f0081c177554e919eeff192cfe9efde15").call());
        let result = await this.SwapRouter.swap("0xFeeDynamic", "0x0000000000000000000000000000000000000000", "1000000000000000", "0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e9e7cea3dedca5984780bafc599bd69add087d5600000000000000000000000000000000000000000000000000038d7ea4c68000000000000000000000000000000000000000000000000000062f78b6d329804b0000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000e68f4745e340300000000000000000000000011ededebf63bef0ea2d2d071bdf88f71543ec6fb00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000128c43c9ef6000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000038d7ea4c68000000000000000000000000000000000000000000000000000063d73001b143cfc00000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000002000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000e9e7cea3dedca5984780bafc599bd69add087d56869584cd00000000000000000000000011ededebf63bef0ea2d2d071bdf88f71543ec6fb00000000000000000000000000000000000000000000001d9756838a61e6cb22000000000000000000000000000000000000000000000000",
        {from: "0x0b25a50f0081c177554e919eeff192cfe9efde15"});
        console.log(await busdContract.methods.balanceOf("0x0b25a50f0081c177554e919eeff192cfe9efde15").call());
        console.log(await busdContract.methods.balanceOf(this.SwapRouter.address).call());
    })
})